{"version":3,"sources":["../../src/usecases/CsvEdit.js"],"names":["CsvEdit","loadCsv","fs","createReadStream","pipe","iconv","decodeStream","encodeStream","csv","parse","transform","record","console","log","zaico","quantity","toNum","undefined","Base"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;;;;;IAEqBA,O;;;AAEnB,qBAAc;AAAA;;AAAA;;AAEZ,UAAKC,OAAL;AAFY;AAGb;;;;8BAES;AACRC,mBAAGC,gBAAH,CAAoB,oBAApB,EACGC,IADH,CACQC,oBAAMC,YAAN,CAAmB,MAAnB,CADR,EAEGF,IAFH,CAEQC,oBAAME,YAAN,CAAmB,OAAnB,CAFR,EAGGH,IAHH,CAGQI,cAAIC,KAAJ,EAHR,EAIGL,IAJH,CAIQI,cAAIE,SAAJ,CAAc,UAASC,MAAT,EAAiB;AACnCC,gBAAQC,GAAR,CAAY,MAAZ,EAAoBF,MAApB;AACD,OAFK,CAJR;AAOC;;;kCAEW;AACZ;AAMD;;;6BAEQG,K,EAAO;AACd;AACA,UAAMC,WAAW,KAAKC,KAAL,CAAWF,MAAMC,QAAjB,CAAjB;AACA,UAAIA,aAAaE,SAAjB,EAA4B;AAC1B,eAAO,KAAP,CAD0B,CACZ;AACf;AACD,aAAOF,WAAW,CAAlB;AACD;;;4BAEOD,K,EAAO;AACbA,YAAMC,QAAN,GAAiB,KAAjB,CADa,CACW;AACxB,aAAOD,KAAP;AACD;;;;EAtCkCI,c;;kBAAhBlB,O","file":"CsvEdit.js","sourcesContent":["import fs from 'fs';\nimport iconv from 'iconv-lite';\nimport csv from 'csv';\n\nimport Base from './Base';\n\nexport default class CsvEdit extends Base {\n\n  constructor() {\n    super();\n    this.loadCsv();\n  }\n\n  loadCsv() {\n    fs.createReadStream('20200227エースコック.csv')\n      .pipe(iconv.decodeStream('SJIS'))\n      .pipe(iconv.encodeStream('UTF-8'))\n      .pipe(csv.parse())\n      .pipe(csv.transform(function(record) {\n        console.log('pipe', record);\n      }));\n    }\n\n  description() {\n    return `\\\n【CsvEdit】\n★CSVファイルのデータ\n(1) 更新データが zaico の値と違う場合上書き\n(2) 削除指定データがある場合、削除用データを作成\n`;\n  }\n\n  isTarget(zaico) {\n    // 数量\n    const quantity = this.toNum(zaico.quantity);\n    if (quantity === undefined) {\n      return false; // 初期導入データなのでスキップ\n    }\n    return quantity < 0;\n  }\n\n  editOne(zaico) {\n    zaico.quantity = '0.0'; // (1)\n    return zaico;\n  }\n}\n"]}