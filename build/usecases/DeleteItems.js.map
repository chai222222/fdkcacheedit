{"version":3,"sources":["../../src/usecases/DeleteItems.js"],"names":["DeleteItems","console","error","process","exit","_checkDefine","descs","getDescriptions","constructor","name","join","zaico","isDeleteTarget","id","Base","DeleteNullItems","quantity","_","get","DeleteNullItemsNotUpdated","created_at","updated_at"],"mappings":";;;;;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;;;IAEMA,W;;;;;;;;;;;mCAEW;AACb;AACAC,cAAQC,KAAR,CAAc,8BAAd;AACAC,cAAQC,IAAR,CAAa,CAAb;AACD;;;sCAEiB;AAChB,WAAKC,YAAL;AACD;;;kCAEa;AACZ,UAAMC,QAAQ,KAAKC,eAAL,EAAd;AACA,aAAO,WACR,KAAKC,WAAL,CAAiBC,IADT,4GAGPH,MAAMI,IAAN,CAAW,IAAX,CAHO,GAGY,IAHnB;AAID;;;6BAEQC,K,EAAO;AACd,aAAO,KAAKC,cAAL,CAAoBD,KAApB,CAAP;AACD;;;mCAEcA,K,EAAO;AACpB,WAAKN,YAAL;AACD;;;4BAEOM,K,EAAO;AACb,aAAO,KAAKC,cAAL,CAAoBD,KAApB,IAA8B,EAAEE,IAAIF,MAAME,EAAZ,EAA9B,GAAkDF,KAAzD;AACD;;;;EA9BuBG,c;;IAiCbC,e,WAAAA,e;;;;;;;;;;;sCAEO;AAChB,aAAO,CACL,mBADK,EAEL,yBAFK,CAAP;AAID;;;mCAEcJ,K,EAAO;AACpB,aAAOA,MAAMK,QAAN,KAAmB,IAAnB,IAA2BC,iBAAEC,GAAF,CAAMP,KAAN,EAAa,gBAAb,EAA+B,IAA/B,MAAyC,IAA3E;AACD;;;;EAXkCX,W;;IAcxBmB,yB,WAAAA,yB;;;;;;;;;;;sCAEO;AAChB,mMAEE,wCAFF;AAID;;;mCAEcR,K,EAAO;AACpB,aAAO,qJAAqBA,KAArB,KAA+BA,MAAMS,UAAN,KAAqBT,MAAMU,UAAjE;AACD;;;;EAX4CN,e","file":"DeleteItems.js","sourcesContent":["import _ from 'lodash'\nimport Base from './Base';\n\nclass DeleteItems extends Base {\n\n  _checkDefine() {\n    // 派生クラスで必ず定義すること\n    console.error('must be define derived class')\n    process.exit(1);\n  }\n\n  getDescriptions() {\n    this._checkDefine();\n  }\n\n  description() {\n    const descs = this.getDescriptions();\n    return `\\\n【${this.constructor.name}】\n全条件にマッチしたデータの削除\n` + descs.join('\\n') + '\\n';\n  }\n\n  isTarget(zaico) {\n    return this.isDeleteTarget(zaico);\n  }\n\n  isDeleteTarget(zaico) {\n    this._checkDefine();\n  }\n\n  editOne(zaico) {\n    return this.isDeleteTarget(zaico) ? ({ id: zaico.id }) : zaico;\n  }\n}\n\nexport class DeleteNullItems extends DeleteItems {\n\n  getDescriptions() {\n    return [\n      '数量(quantity)がnull',\n      '画像(item_image.url)がnull',\n    ];\n  }\n\n  isDeleteTarget(zaico) {\n    return zaico.quantity === null || _.get(zaico, 'item_image.url', null) === null;\n  }\n}\n\nexport class DeleteNullItemsNotUpdated extends DeleteNullItems {\n\n  getDescriptions() {\n    return [\n      ...super.getDescriptions(),\n      '作成日時(created_at)と更新日時(updated_at)の値が等価',\n    ];\n  }\n\n  isDeleteTarget(zaico) {\n    return super.isDeleteTarget(zaico) && zaico.created_at === zaico.updated_at;\n  }\n}\n"]}