{"version":3,"sources":["../../src/usecases/DeleteItems.js"],"names":["DeleteItems","console","error","process","exit","_checkDefine","descs","getDescriptions","join","zaico","isDeleteTarget","record","id","Base","DeleteNullItems","quantity","_","get","DeleteNullItemsNotUpdated","created_at","updated_at"],"mappings":";;;;;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;;;IAEMA,W;;;;;;;;;;;mCAEW;AACb;AACAC,cAAQC,KAAR,CAAc,8BAAd;AACAC,cAAQC,IAAR,CAAa,CAAb;AACD;;;sCAEiB;AAChB,WAAKC,YAAL;AACD;;;kCAEa;AACZ,UAAMC,QAAQ,KAAKC,eAAL,EAAd;AACA,aAAO,8HAGPD,MAAME,IAAN,CAAW,IAAX,CAHO,GAGY,IAHnB;AAID;;;6BAEQC,K,EAAO;AACd,aAAO,KAAKC,cAAL,CAAoBD,KAApB,CAAP;AACD;;;mCAEcA,K,EAAO;AACpB,WAAKJ,YAAL;AACD;;;4BAEOI,K,EAAO;AACb,UAAI,CAACE,MAAL,EAAa,OAAOF,KAAP,CADA,CACc;AAC3B,aAAO,KAAKC,cAAL,CAAoBD,KAApB,IAA8B,EAAEG,IAAIH,MAAMG,EAAZ,EAA9B,GAAkDH,KAAzD;AACD;;;;EA/BuBI,c;;IAkCbC,e,WAAAA,e;;;;;;;;;;;sCAEO;AAChB,aAAO,CACL,mBADK,EAEL,yBAFK,CAAP;AAID;;;mCAEcL,K,EAAO;AACpB,aAAOA,MAAMM,QAAN,KAAmB,IAAnB,IAA2BC,iBAAEC,GAAF,CAAMR,KAAN,EAAa,gBAAb,EAA+B,IAA/B,MAAyC,IAA3E;AACD;;;;EAXkCT,W;;IAcxBkB,yB,WAAAA,yB;;;;;;;;;;;sCAEO;AAChB,mMAEE,wCAFF;AAID;;;mCAEcT,K,EAAO;AACpB,aAAO,qJAAqBA,KAArB,KAA+BA,MAAMU,UAAN,KAAqBV,MAAMW,UAAjE;AACD;;;;EAX4CN,e","file":"DeleteItems.js","sourcesContent":["import _ from 'lodash'\nimport Base from './Base';\n\nclass DeleteItems extends Base {\n\n  _checkDefine() {\n    // 派生クラスで必ず定義すること\n    console.error('must be define derived class')\n    process.exit(1);\n  }\n\n  getDescriptions() {\n    this._checkDefine();\n  }\n\n  description() {\n    const descs = this.getDescriptions();\n    return `\\\n【DeleteNullItems】\n全条件にマッチしたデータの削除\n` + descs.join('\\n') + '\\n';\n  }\n\n  isTarget(zaico) {\n    return this.isDeleteTarget(zaico);\n  }\n\n  isDeleteTarget(zaico) {\n    this._checkDefine();\n  }\n\n  editOne(zaico) {\n    if (!record) return zaico; // zaicoのデータがinputのcsvには存在しない\n    return this.isDeleteTarget(zaico) ? ({ id: zaico.id }) : zaico;\n  }\n}\n\nexport class DeleteNullItems extends DeleteItems {\n\n  getDescriptions() {\n    return [\n      '数量(quantity)がnull',\n      '画像(item_image.url)がnull',\n    ];\n  }\n\n  isDeleteTarget(zaico) {\n    return zaico.quantity === null || _.get(zaico, 'item_image.url', null) === null;\n  }\n}\n\nexport class DeleteNullItemsNotUpdated extends DeleteNullItems {\n\n  getDescriptions() {\n    return [\n      ...super.getDescriptions(),\n      '作成日時(created_at)と更新日時(updated_at)の値が等価',\n    ];\n  }\n\n  isDeleteTarget(zaico) {\n    return super.isDeleteTarget(zaico) && zaico.created_at === zaico.updated_at;\n  }\n}\n"]}